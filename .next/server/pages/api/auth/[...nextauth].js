"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "@next-auth/mongodb-adapter":
/*!*********************************************!*\
  !*** external "@next-auth/mongodb-adapter" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/mongodb-adapter");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/facebook":
/*!***********************************************!*\
  !*** external "next-auth/providers/facebook" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/facebook");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\[...nextauth].js */ \"(api)/./pages/api/auth/[...nextauth].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/[...nextauth]\",\n        pathname: \"/api/auth/[...nextauth]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_nextauth_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXV0aCU1QyU1Qi4uLm5leHRhdXRoJTVELmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veC1jbG9uZS1uZXh0anMvP2YwNjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhdXRoXFxcXFsuLi5uZXh0YXV0aF0uanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    const error = new Error(\"Please add your Mongo URI to .env.local\");\n    console.error(\"MongoDB 連接錯誤:\", error.message);\n    throw error;\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nif (true) {\n    // 開發環境：使用全局變量避免多次連接\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect().catch((error)=>{\n            console.error(\"MongoDB 連接失敗:\", error.message);\n            throw error;\n        });\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFFdEMsSUFBSSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtJQUM1QixNQUFNQyxRQUFRLElBQUlDLE1BQU07SUFDeEJDLFFBQVFGLEtBQUssQ0FBQyxpQkFBaUJBLE1BQU1HLE9BQU87SUFDNUMsTUFBTUg7QUFDUjtBQUVBLE1BQU1JLE1BQU1QLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztBQUNuQyxNQUFNTSxVQUFVLENBQUM7QUFFakIsSUFBSUM7QUFDSixJQUFJQztBQUVKLElBQUlWLElBQXlCLEVBQWU7SUFDMUMsb0JBQW9CO0lBQ3BCLElBQUksQ0FBQ1csT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JILFNBQVMsSUFBSVYsZ0RBQVdBLENBQUNRLEtBQUtDO1FBQzlCRyxPQUFPQyxtQkFBbUIsR0FBR0gsT0FBT0ksT0FBTyxHQUFHQyxLQUFLLENBQUMsQ0FBQ1g7WUFDbkRFLFFBQVFGLEtBQUssQ0FBQyxpQkFBaUJBLE1BQU1HLE9BQU87WUFDNUMsTUFBTUg7UUFDUjtJQUNGO0lBQ0FPLGdCQUFnQkMsT0FBT0MsbUJBQW1CO0FBQzVDLE9BQU8sRUFPTjtBQUVELGlFQUFlRixhQUFhQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veC1jbG9uZS1uZXh0anMvLi9saWIvbW9uZ29kYi5qcz9kOTIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XHJcblxyXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XHJcbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1BsZWFzZSBhZGQgeW91ciBNb25nbyBVUkkgdG8gLmVudi5sb2NhbCcpO1xyXG4gIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIg6YCj5o6l6Yyv6KqkOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gIHRocm93IGVycm9yO1xyXG59XHJcblxyXG5jb25zdCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuY29uc3Qgb3B0aW9ucyA9IHt9O1xyXG5cclxubGV0IGNsaWVudDtcclxubGV0IGNsaWVudFByb21pc2U7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAvLyDplovnmbznkrDlooPvvJrkvb/nlKjlhajlsYDororph4/pgb/lhY3lpJrmrKHpgKPmjqVcclxuICBpZiAoIWdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlKSB7XHJcbiAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcclxuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignTW9uZ29EQiDpgKPmjqXlpLHmlZc6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZTtcclxufSBlbHNlIHtcclxuICAvLyDnlJ/nlKLnkrDlooNcclxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcclxuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIg6YCj5o6l5aSx5pWXOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsaWVudFByb21pc2U7XHJcblxyXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJlcnJvciIsIkVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJ1cmkiLCJvcHRpb25zIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0IiwiY2F0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/facebook */ \"next-auth/providers/facebook\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/mongodb */ \"(api)/./lib/mongodb.js\");\n/* harmony import */ var _next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @next-auth/mongodb-adapter */ \"@next-auth/mongodb-adapter\");\n/* harmony import */ var _next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n// 驗證必要的環境變量\nif (!process.env.GOOGLE_CLIENT_ID || !process.env.GOOGLE_CLIENT_SECRET) {\n    console.warn(\"警告: GOOGLE_CLIENT_ID 或 GOOGLE_CLIENT_SECRET 未設置\");\n}\nif (!process.env.MONGODB_URI) {\n    console.error(\"錯誤: MONGODB_URI 未設置\");\n}\nif (false) {}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()({\n    adapter: (0,_next_auth_mongodb_adapter__WEBPACK_IMPORTED_MODULE_6__.MongoDBAdapter)(_lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2___default()({\n            clientId: process.env.GITHUB_CLIENT_ID,\n            clientSecret: process.env.GITHUB_CLIENT_SECRET\n        }),\n        next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: process.env.FACEBOOK_CLIENT_ID,\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4___default()({\n            name: \"Credentials\",\n            credentials: {\n                userID: {\n                    label: \"UserID\",\n                    type: \"text\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.userID) {\n                    return null;\n                }\n                const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n                const db = client.db();\n                const users = db.collection(\"users\");\n                // 查找用戶\n                const user = await users.findOne({\n                    userID: credentials.userID\n                });\n                if (user) {\n                    return {\n                        id: user._id.toString(),\n                        userID: user.userID,\n                        name: user.name,\n                        email: user.email\n                    };\n                }\n                return null;\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user, account, profile }) {\n            // 首次登入時，user 對象可用\n            if (user) {\n                token.id = user.id;\n                token.userID = user.userID;\n                token.email = user.email;\n            }\n            // 如果是 OAuth 登入，從數據庫獲取用戶信息\n            if (account && account.provider !== \"credentials\") {\n                const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n                const db = client.db();\n                const users = db.collection(\"users\");\n                // 先通過 provider 和 providerId 查找（最可靠）\n                let dbUser = await users.findOne({\n                    provider: account.provider,\n                    providerId: account.providerAccountId,\n                    oauthCompleted: true\n                });\n                // 如果找不到，通過 email 查找\n                if (!dbUser && user?.email) {\n                    dbUser = await users.findOne({\n                        email: user.email,\n                        oauthCompleted: true\n                    });\n                }\n                // 如果還是找不到，查找所有匹配 email 的用戶（包括未完成的）\n                if (!dbUser && user?.email) {\n                    dbUser = await users.findOne({\n                        email: user.email\n                    });\n                }\n                if (dbUser) {\n                    token.id = dbUser._id.toString();\n                    token.userID = dbUser.userID;\n                    token.email = dbUser.email || user?.email;\n                    console.log(\"JWT callback: 找到用戶\", {\n                        userID: dbUser.userID,\n                        email: token.email\n                    });\n                } else {\n                    console.warn(\"JWT callback: 找不到用戶\", {\n                        provider: account.provider,\n                        providerId: account.providerAccountId,\n                        email: user?.email\n                    });\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user && token) {\n                const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n                const db = client.db();\n                const users = db.collection(\"users\");\n                // 從 token 中獲取用戶信息\n                let dbUser = null;\n                // 優先通過 token 中的 userID 查找\n                if (token.userID) {\n                    dbUser = await users.findOne({\n                        userID: token.userID,\n                        oauthCompleted: true\n                    });\n                }\n                // 如果找不到，通過 email 查找\n                if (!dbUser && token.email) {\n                    dbUser = await users.findOne({\n                        email: token.email,\n                        oauthCompleted: true\n                    });\n                }\n                // 如果還是找不到，查找所有匹配 email 的用戶（包括未完成的）\n                if (!dbUser && session.user.email) {\n                    dbUser = await users.findOne({\n                        email: session.user.email\n                    });\n                }\n                if (dbUser) {\n                    session.user.id = dbUser._id.toString();\n                    session.user.userID = dbUser.userID || `${dbUser.provider}_${dbUser.providerId}`;\n                    session.user.name = dbUser.name || session.user.name;\n                    session.user.image = dbUser.image || session.user.image;\n                    session.user.email = dbUser.email || session.user.email;\n                    // 调试日志\n                    console.log(\"Session callback: 找到用戶\", {\n                        userID: session.user.userID,\n                        email: session.user.email\n                    });\n                } else {\n                    // 如果找不到用戶，使用 token 中的信息\n                    if (token.userID) {\n                        session.user.id = token.id;\n                        session.user.userID = token.userID;\n                        session.user.email = token.email || session.user.email;\n                        console.log(\"Session callback: 使用 token 中的 userID\", {\n                            userID: session.user.userID\n                        });\n                    } else {\n                        // 如果找不到用戶，記錄警告\n                        console.warn(\"Session callback: 找不到用戶\", {\n                            email: session.user.email,\n                            tokenUserID: token.userID,\n                            tokenEmail: token.email\n                        });\n                    }\n                }\n                // 确保 userID 总是被设置\n                if (!session.user.userID && session.user.email) {\n                    // 最后一次尝试：通过 email 查找用户\n                    const fallbackUser = await users.findOne({\n                        email: session.user.email\n                    });\n                    if (fallbackUser) {\n                        session.user.userID = fallbackUser.userID;\n                        console.log(\"Session callback: 通过 email 找到 userID\", {\n                            userID: session.user.userID\n                        });\n                    }\n                }\n            }\n            return session;\n        },\n        async signIn ({ user, account, profile }, req) {\n            if (account?.provider === \"credentials\") {\n                return true;\n            }\n            // OAuth 登入：關聯或創建用戶\n            const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_5__[\"default\"];\n            const db = client.db();\n            const users = db.collection(\"users\");\n            console.log(\"OAuth signIn callback:\", {\n                provider: account.provider,\n                providerId: account.providerAccountId,\n                email: user.email\n            });\n            // 登入流程：先檢查是否已有該 Provider 的用戶（已完成 OAuth）\n            const existingUser = await users.findOne({\n                provider: account.provider,\n                providerId: account.providerAccountId,\n                oauthCompleted: true\n            });\n            if (existingUser) {\n                // 用戶已存在且已完成 OAuth，直接登入\n                console.log(\"找到已完成的用戶:\", {\n                    userID: existingUser.userID,\n                    email: existingUser.email\n                });\n                // 確保 NextAuth adapter 能夠找到賬戶記錄\n                // 檢查 accounts 集合中是否有對應的賬戶記錄\n                const accounts = db.collection(\"accounts\");\n                const existingAccount = await accounts.findOne({\n                    provider: account.provider,\n                    providerAccountId: account.providerAccountId\n                });\n                if (!existingAccount) {\n                    // 如果沒有找到賬戶記錄，手動創建一個\n                    console.log(\"未找到賬戶記錄，手動創建\");\n                    await accounts.insertOne({\n                        userId: existingUser._id,\n                        type: \"oauth\",\n                        provider: account.provider,\n                        providerAccountId: account.providerAccountId,\n                        refresh_token: account.refresh_token,\n                        access_token: account.access_token,\n                        expires_at: account.expires_at,\n                        token_type: account.token_type,\n                        scope: account.scope,\n                        id_token: account.id_token,\n                        session_state: account.session_state\n                    });\n                    console.log(\"賬戶記錄創建完成\");\n                }\n                return true;\n            }\n            // 查找該 Provider 下所有未完成 OAuth 的用戶記錄（不限制時間）\n            // 優先查找最近創建的，如果沒有則查找所有未完成的\n            const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000);\n            // 先查找最近5分鐘內的待關聯記錄\n            let pendingUser = await users.findOne({\n                provider: account.provider,\n                oauthCompleted: false,\n                createdAt: {\n                    $gte: fiveMinutesAgo\n                }\n            });\n            // 如果沒有找到，查找所有該 Provider 下未完成 OAuth 的用戶（按創建時間排序，取最新的）\n            if (!pendingUser) {\n                pendingUser = await users.findOne({\n                    provider: account.provider,\n                    oauthCompleted: false\n                }, {\n                    sort: {\n                        createdAt: -1\n                    }\n                });\n            }\n            if (pendingUser) {\n                // 更新用戶記錄，關聯 OAuth 信息\n                console.log(\"找到待關聯用戶:\", {\n                    userID: pendingUser.userID,\n                    provider: pendingUser.provider,\n                    providerId: account.providerAccountId\n                });\n                await users.updateOne({\n                    _id: pendingUser._id\n                }, {\n                    $set: {\n                        providerId: account.providerAccountId,\n                        email: user.email,\n                        image: user.image || profile?.picture,\n                        oauthCompleted: true,\n                        updatedAt: new Date()\n                    }\n                });\n                console.log(\"用戶 OAuth 關聯完成:\", {\n                    userID: pendingUser.userID,\n                    email: user.email\n                });\n                // 確保 NextAuth adapter 能夠找到賬戶記錄\n                // 檢查 accounts 集合中是否有對應的賬戶記錄\n                const accounts = db.collection(\"accounts\");\n                const existingAccount = await accounts.findOne({\n                    provider: account.provider,\n                    providerAccountId: account.providerAccountId\n                });\n                if (!existingAccount) {\n                    // 如果沒有找到賬戶記錄，手動創建一個\n                    console.log(\"未找到賬戶記錄，手動創建\");\n                    await accounts.insertOne({\n                        userId: pendingUser._id,\n                        type: \"oauth\",\n                        provider: account.provider,\n                        providerAccountId: account.providerAccountId,\n                        refresh_token: account.refresh_token,\n                        access_token: account.access_token,\n                        expires_at: account.expires_at,\n                        token_type: account.token_type,\n                        scope: account.scope,\n                        id_token: account.id_token,\n                        session_state: account.session_state\n                    });\n                    console.log(\"賬戶記錄創建完成\");\n                }\n                // 返回 true，允許 NextAuth adapter 創建賬戶記錄\n                return true;\n            }\n            // 如果都沒有，創建新用戶（這種情況不應該發生，但保留作為後備）\n            console.warn(\"未找到待關聯用戶，創建新用戶\");\n            const autoUserID = `${account.provider}_${account.providerAccountId}`;\n            await users.insertOne({\n                userID: autoUserID,\n                name: user.name || profile?.name || user.email?.split(\"@\")[0],\n                email: user.email,\n                provider: account.provider,\n                providerId: account.providerAccountId,\n                image: user.image || profile?.picture,\n                oauthCompleted: true,\n                createdAt: new Date()\n            });\n            // 返回 true，允許 NextAuth adapter 創建賬戶記錄\n            return true;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 7 * 24 * 60 * 60\n    },\n    secret: \"your-secret-key-change-this-in-production\"\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRXRDLFFBQVFFLFFBQVEsQ0FBQyxDQUFDLEVBQUVGLFFBQVFLLGlCQUFpQixDQUFDLENBQUM7WUFDckUsTUFBTWhCLE1BQU02QixTQUFTLENBQUM7Z0JBQ3BCbkMsUUFBUXVEO2dCQUNSekQsTUFBTVUsS0FBS1YsSUFBSSxJQUFJb0IsU0FBU3BCLFFBQVFVLEtBQUtLLEtBQUssRUFBRTJDLE1BQU0sSUFBSSxDQUFDLEVBQUU7Z0JBQzdEM0MsT0FBT0wsS0FBS0ssS0FBSztnQkFDakJNLFVBQVVGLFFBQVFFLFFBQVE7Z0JBQzFCRSxZQUFZSixRQUFRSyxpQkFBaUI7Z0JBQ3JDSSxPQUFPbEIsS0FBS2tCLEtBQUssSUFBSVIsU0FBU21DO2dCQUM5QjlCLGdCQUFnQjtnQkFDaEJ5QixXQUFXLElBQUlIO1lBQ2pCO1lBRUEscUNBQXFDO1lBQ3JDLE9BQU87UUFDVDtJQUNGO0lBQ0FZLE9BQU87UUFDTDNCLFFBQVE7UUFDUi9DLE9BQU87SUFDVDtJQUNBMEMsU0FBUztRQUNQaUMsVUFBVTtRQUNWQyxRQUFRLElBQUksS0FBSyxLQUFLO0lBQ3hCO0lBQ0FDLFFBQVFwRiwyQ0FBMkI7QUFDckMsRUFBRSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veC1jbG9uZS1uZXh0anMvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzPzUyN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCc7XHJcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XHJcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dpdGh1Yic7XHJcbmltcG9ydCBGYWNlYm9va1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZmFjZWJvb2snO1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcclxuaW1wb3J0IGNsaWVudFByb21pc2UgZnJvbSAnQC9saWIvbW9uZ29kYic7XHJcbmltcG9ydCB7IE1vbmdvREJBZGFwdGVyIH0gZnJvbSAnQG5leHQtYXV0aC9tb25nb2RiLWFkYXB0ZXInO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuXHJcbi8vIOmpl+itieW/heimgeeahOeSsOWig+iuiumHj1xyXG5pZiAoIXByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgfHwgIXByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUKSB7XHJcbiAgY29uc29sZS53YXJuKCforablkYo6IEdPT0dMRV9DTElFTlRfSUQg5oiWIEdPT0dMRV9DTElFTlRfU0VDUkVUIOacquioree9ricpO1xyXG59XHJcblxyXG5pZiAoIXByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XHJcbiAgY29uc29sZS5lcnJvcign6Yyv6KqkOiBNT05HT0RCX1VSSSDmnKroqK3nva4nKTtcclxufVxyXG5cclxuaWYgKCFwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQpIHtcclxuICBjb25zb2xlLndhcm4oJ+itpuWRijogTkVYVEFVVEhfU0VDUkVUIOacquioree9ru+8jOmAmeWPr+iDveWwjuiHtOWuieWFqOWVj+mhjCcpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aCh7XHJcbiAgYWRhcHRlcjogTW9uZ29EQkFkYXB0ZXIoY2xpZW50UHJvbWlzZSksXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBHb29nbGVQcm92aWRlcih7XHJcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEIHx8ICcnLFxyXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUIHx8ICcnLFxyXG4gICAgICBhdXRob3JpemF0aW9uOiB7XHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBwcm9tcHQ6ICdjb25zZW50JyxcclxuICAgICAgICAgIGFjY2Vzc190eXBlOiAnb2ZmbGluZScsXHJcbiAgICAgICAgICByZXNwb25zZV90eXBlOiAnY29kZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pLFxyXG4gICAgR2l0SHViUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9JRCxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIH0pLFxyXG4gICAgRmFjZWJvb2tQcm92aWRlcih7XHJcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQsXHJcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuRkFDRUJPT0tfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIH0pLFxyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgICAgdXNlcklEOiB7IGxhYmVsOiAnVXNlcklEJywgdHlwZTogJ3RleHQnIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LnVzZXJJRCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xyXG4gICAgICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCk7XHJcbiAgICAgICAgY29uc3QgdXNlcnMgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpO1xyXG5cclxuICAgICAgICAvLyDmn6Xmib7nlKjmiLZcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHVzZXJJRDogY3JlZGVudGlhbHMudXNlcklEIH0pO1xyXG5cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHVzZXIuX2lkLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHVzZXJJRDogdXNlci51c2VySUQsXHJcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH0sXHJcbiAgICB9KSxcclxuICBdLFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSkge1xyXG4gICAgICAvLyDpppbmrKHnmbvlhaXmmYLvvIx1c2VyIOWwjeixoeWPr+eUqFxyXG4gICAgICBpZiAodXNlcikge1xyXG4gICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcclxuICAgICAgICB0b2tlbi51c2VySUQgPSB1c2VyLnVzZXJJRDtcclxuICAgICAgICB0b2tlbi5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOWmguaenOaYryBPQXV0aCDnmbvlhaXvvIzlvp7mlbjmk5rluqvnjbLlj5bnlKjmiLbkv6Hmga9cclxuICAgICAgaWYgKGFjY291bnQgJiYgYWNjb3VudC5wcm92aWRlciAhPT0gJ2NyZWRlbnRpYWxzJykge1xyXG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XHJcbiAgICAgICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuICAgICAgICBjb25zdCB1c2VycyA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5YWI6YCa6YGOIHByb3ZpZGVyIOWSjCBwcm92aWRlcklkIOafpeaJvu+8iOacgOWPr+mdoO+8iVxyXG4gICAgICAgIGxldCBkYlVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxyXG4gICAgICAgICAgcHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcclxuICAgICAgICAgIG9hdXRoQ29tcGxldGVkOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWmguaenOaJvuS4jeWIsO+8jOmAmumBjiBlbWFpbCDmn6Xmib5cclxuICAgICAgICBpZiAoIWRiVXNlciAmJiB1c2VyPy5lbWFpbCkge1xyXG4gICAgICAgICAgZGJVc2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICBvYXV0aENvbXBsZXRlZDogdHJ1ZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDlpoLmnpzpgoTmmK/mib7kuI3liLDvvIzmn6Xmib7miYDmnInljLnphY0gZW1haWwg55qE55So5oi277yI5YyF5ous5pyq5a6M5oiQ55qE77yJXHJcbiAgICAgICAgaWYgKCFkYlVzZXIgJiYgdXNlcj8uZW1haWwpIHtcclxuICAgICAgICAgIGRiVXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoZGJVc2VyKSB7XHJcbiAgICAgICAgICB0b2tlbi5pZCA9IGRiVXNlci5faWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgIHRva2VuLnVzZXJJRCA9IGRiVXNlci51c2VySUQ7XHJcbiAgICAgICAgICB0b2tlbi5lbWFpbCA9IGRiVXNlci5lbWFpbCB8fCB1c2VyPy5lbWFpbDtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1QgY2FsbGJhY2s6IOaJvuWIsOeUqOaIticsIHtcclxuICAgICAgICAgICAgdXNlcklEOiBkYlVzZXIudXNlcklELFxyXG4gICAgICAgICAgICBlbWFpbDogdG9rZW4uZW1haWwsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdKV1QgY2FsbGJhY2s6IOaJvuS4jeWIsOeUqOaIticsIHtcclxuICAgICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXHJcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyPy5lbWFpbCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfSxcclxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XHJcbiAgICAgIGlmIChzZXNzaW9uLnVzZXIgJiYgdG9rZW4pIHtcclxuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xyXG4gICAgICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCk7XHJcbiAgICAgICAgY29uc3QgdXNlcnMgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpO1xyXG5cclxuICAgICAgICAvLyDlvp4gdG9rZW4g5Lit542y5Y+W55So5oi25L+h5oGvXHJcbiAgICAgICAgbGV0IGRiVXNlciA9IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5YSq5YWI6YCa6YGOIHRva2VuIOS4reeahCB1c2VySUQg5p+l5om+XHJcbiAgICAgICAgaWYgKHRva2VuLnVzZXJJRCkge1xyXG4gICAgICAgICAgZGJVc2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIHVzZXJJRDogdG9rZW4udXNlcklELFxyXG4gICAgICAgICAgICBvYXV0aENvbXBsZXRlZDogdHJ1ZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw77yM6YCa6YGOIGVtYWlsIOafpeaJvlxyXG4gICAgICAgIGlmICghZGJVc2VyICYmIHRva2VuLmVtYWlsKSB7XHJcbiAgICAgICAgICBkYlVzZXIgPSBhd2FpdCB1c2Vycy5maW5kT25lKHtcclxuICAgICAgICAgICAgZW1haWw6IHRva2VuLmVtYWlsLFxyXG4gICAgICAgICAgICBvYXV0aENvbXBsZXRlZDogdHJ1ZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c6YKE5piv5om+5LiN5Yiw77yM5p+l5om+5omA5pyJ5Yy56YWNIGVtYWlsIOeahOeUqOaItu+8iOWMheaLrOacquWujOaIkOeahO+8iVxyXG4gICAgICAgIGlmICghZGJVc2VyICYmIHNlc3Npb24udXNlci5lbWFpbCkge1xyXG4gICAgICAgICAgZGJVc2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYlVzZXIpIHtcclxuICAgICAgICAgIHNlc3Npb24udXNlci5pZCA9IGRiVXNlci5faWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgIHNlc3Npb24udXNlci51c2VySUQgPSBkYlVzZXIudXNlcklEIHx8IGAke2RiVXNlci5wcm92aWRlcn1fJHtkYlVzZXIucHJvdmlkZXJJZH1gO1xyXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLm5hbWUgPSBkYlVzZXIubmFtZSB8fCBzZXNzaW9uLnVzZXIubmFtZTtcclxuICAgICAgICAgIHNlc3Npb24udXNlci5pbWFnZSA9IGRiVXNlci5pbWFnZSB8fCBzZXNzaW9uLnVzZXIuaW1hZ2U7XHJcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWwgPSBkYlVzZXIuZW1haWwgfHwgc2Vzc2lvbi51c2VyLmVtYWlsO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyDosIPor5Xml6Xlv5dcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGNhbGxiYWNrOiDmib7liLDnlKjmiLYnLCB7XHJcbiAgICAgICAgICAgIHVzZXJJRDogc2Vzc2lvbi51c2VyLnVzZXJJRCxcclxuICAgICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyDlpoLmnpzmib7kuI3liLDnlKjmiLbvvIzkvb/nlKggdG9rZW4g5Lit55qE5L+h5oGvXHJcbiAgICAgICAgICBpZiAodG9rZW4udXNlcklEKSB7XHJcbiAgICAgICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkO1xyXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIudXNlcklEID0gdG9rZW4udXNlcklEO1xyXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWwgPSB0b2tlbi5lbWFpbCB8fCBzZXNzaW9uLnVzZXIuZW1haWw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBjYWxsYmFjazog5L2/55SoIHRva2VuIOS4reeahCB1c2VySUQnLCB7XHJcbiAgICAgICAgICAgICAgdXNlcklEOiBzZXNzaW9uLnVzZXIudXNlcklELFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaJvuS4jeWIsOeUqOaItu+8jOiomOmMhOitpuWRilxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1Nlc3Npb24gY2FsbGJhY2s6IOaJvuS4jeWIsOeUqOaIticsIHtcclxuICAgICAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICAgIHRva2VuVXNlcklEOiB0b2tlbi51c2VySUQsXHJcbiAgICAgICAgICAgICAgdG9rZW5FbWFpbDogdG9rZW4uZW1haWwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDnoa7kv50gdXNlcklEIOaAu+aYr+iiq+iuvue9rlxyXG4gICAgICAgIGlmICghc2Vzc2lvbi51c2VyLnVzZXJJRCAmJiBzZXNzaW9uLnVzZXIuZW1haWwpIHtcclxuICAgICAgICAgIC8vIOacgOWQjuS4gOasoeWwneivle+8mumAmui/hyBlbWFpbCDmn6Xmib7nlKjmiLdcclxuICAgICAgICAgIGNvbnN0IGZhbGxiYWNrVXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoeyBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsIH0pO1xyXG4gICAgICAgICAgaWYgKGZhbGxiYWNrVXNlcikge1xyXG4gICAgICAgICAgICBzZXNzaW9uLnVzZXIudXNlcklEID0gZmFsbGJhY2tVc2VyLnVzZXJJRDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gY2FsbGJhY2s6IOmAmui/hyBlbWFpbCDmib7liLAgdXNlcklEJywge1xyXG4gICAgICAgICAgICAgIHVzZXJJRDogc2Vzc2lvbi51c2VyLnVzZXJJRCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXNzaW9uO1xyXG4gICAgfSxcclxuICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSwgcmVxKSB7XHJcbiAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciA9PT0gJ2NyZWRlbnRpYWxzJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBPQXV0aCDnmbvlhaXvvJrpl5zoga/miJblibXlu7rnlKjmiLZcclxuICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcclxuICAgICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuICAgICAgY29uc3QgdXNlcnMgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ09BdXRoIHNpZ25JbiBjYWxsYmFjazonLCB7XHJcbiAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXHJcbiAgICAgICAgcHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDnmbvlhaXmtYHnqIvvvJrlhYjmqqLmn6XmmK/lkKblt7LmnInoqbIgUHJvdmlkZXIg55qE55So5oi277yI5bey5a6M5oiQIE9BdXRo77yJXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoe1xyXG4gICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxyXG4gICAgICAgIHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXHJcbiAgICAgICAgb2F1dGhDb21wbGV0ZWQ6IHRydWUsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICAgIC8vIOeUqOaItuW3suWtmOWcqOS4lOW3suWujOaIkCBPQXV0aO+8jOebtOaOpeeZu+WFpVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCfmib7liLDlt7LlrozmiJDnmoTnlKjmiLY6Jywge1xyXG4gICAgICAgICAgdXNlcklEOiBleGlzdGluZ1VzZXIudXNlcklELFxyXG4gICAgICAgICAgZW1haWw6IGV4aXN0aW5nVXNlci5lbWFpbCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDnorrkv50gTmV4dEF1dGggYWRhcHRlciDog73lpKDmib7liLDos6zmiLboqJjpjIRcclxuICAgICAgICAvLyDmqqLmn6UgYWNjb3VudHMg6ZuG5ZCI5Lit5piv5ZCm5pyJ5bCN5oeJ55qE6LOs5oi26KiY6YyEXHJcbiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBkYi5jb2xsZWN0aW9uKCdhY2NvdW50cycpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudCA9IGF3YWl0IGFjY291bnRzLmZpbmRPbmUoe1xyXG4gICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXHJcbiAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWV4aXN0aW5nQWNjb3VudCkge1xyXG4gICAgICAgICAgLy8g5aaC5p6c5rKS5pyJ5om+5Yiw6LOs5oi26KiY6YyE77yM5omL5YuV5Ym15bu65LiA5YCLXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn5pyq5om+5Yiw6LOs5oi26KiY6YyE77yM5omL5YuV5Ym15bu6Jyk7XHJcbiAgICAgICAgICBhd2FpdCBhY2NvdW50cy5pbnNlcnRPbmUoe1xyXG4gICAgICAgICAgICB1c2VySWQ6IGV4aXN0aW5nVXNlci5faWQsXHJcbiAgICAgICAgICAgIHR5cGU6ICdvYXV0aCcsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxyXG4gICAgICAgICAgICBwcm92aWRlckFjY291bnRJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcclxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogYWNjb3VudC5yZWZyZXNoX3Rva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IGFjY291bnQuYWNjZXNzX3Rva2VuLFxyXG4gICAgICAgICAgICBleHBpcmVzX2F0OiBhY2NvdW50LmV4cGlyZXNfYXQsXHJcbiAgICAgICAgICAgIHRva2VuX3R5cGU6IGFjY291bnQudG9rZW5fdHlwZSxcclxuICAgICAgICAgICAgc2NvcGU6IGFjY291bnQuc2NvcGUsXHJcbiAgICAgICAgICAgIGlkX3Rva2VuOiBhY2NvdW50LmlkX3Rva2VuLFxyXG4gICAgICAgICAgICBzZXNzaW9uX3N0YXRlOiBhY2NvdW50LnNlc3Npb25fc3RhdGUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfos6zmiLboqJjpjITlibXlu7rlrozmiJAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOafpeaJvuipsiBQcm92aWRlciDkuIvmiYDmnInmnKrlrozmiJAgT0F1dGgg55qE55So5oi26KiY6YyE77yI5LiN6ZmQ5Yi25pmC6ZaT77yJXHJcbiAgICAgIC8vIOWEquWFiOafpeaJvuacgOi/keWJteW7uueahO+8jOWmguaenOaykuacieWJh+afpeaJvuaJgOacieacquWujOaIkOeahFxyXG4gICAgICBjb25zdCBmaXZlTWludXRlc0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSA1ICogNjAgKiAxMDAwKTtcclxuICAgICAgXHJcbiAgICAgIC8vIOWFiOafpeaJvuacgOi/kTXliIbpkJjlhafnmoTlvoXpl5zoga/oqJjpjIRcclxuICAgICAgbGV0IHBlbmRpbmdVc2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7XHJcbiAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXHJcbiAgICAgICAgb2F1dGhDb21wbGV0ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBmaXZlTWludXRlc0FnbyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIOWmguaenOaykuacieaJvuWIsO+8jOafpeaJvuaJgOacieipsiBQcm92aWRlciDkuIvmnKrlrozmiJAgT0F1dGgg55qE55So5oi277yI5oyJ5Ym15bu65pmC6ZaT5o6S5bqP77yM5Y+W5pyA5paw55qE77yJXHJcbiAgICAgIGlmICghcGVuZGluZ1VzZXIpIHtcclxuICAgICAgICBwZW5kaW5nVXNlciA9IGF3YWl0IHVzZXJzLmZpbmRPbmUoXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyLFxyXG4gICAgICAgICAgICBvYXV0aENvbXBsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzb3J0OiB7IGNyZWF0ZWRBdDogLTEgfSwgLy8g5oyJ5Ym15bu65pmC6ZaT6ZmN5bqP77yM5Y+W5pyA5paw55qEXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBlbmRpbmdVc2VyKSB7XHJcbiAgICAgICAgLy8g5pu05paw55So5oi26KiY6YyE77yM6Zec6IGvIE9BdXRoIOS/oeaBr1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfmib7liLDlvoXpl5zoga/nlKjmiLY6Jywge1xyXG4gICAgICAgICAgdXNlcklEOiBwZW5kaW5nVXNlci51c2VySUQsXHJcbiAgICAgICAgICBwcm92aWRlcjogcGVuZGluZ1VzZXIucHJvdmlkZXIsXHJcbiAgICAgICAgICBwcm92aWRlcklkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHVzZXJzLnVwZGF0ZU9uZShcclxuICAgICAgICAgIHsgX2lkOiBwZW5kaW5nVXNlci5faWQgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgJHNldDoge1xyXG4gICAgICAgICAgICAgIHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXHJcbiAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UgfHwgcHJvZmlsZT8ucGljdHVyZSxcclxuICAgICAgICAgICAgICBvYXV0aENvbXBsZXRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygn55So5oi2IE9BdXRoIOmXnOiBr+WujOaIkDonLCB7XHJcbiAgICAgICAgICB1c2VySUQ6IHBlbmRpbmdVc2VyLnVzZXJJRCxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOeiuuS/nSBOZXh0QXV0aCBhZGFwdGVyIOiDveWkoOaJvuWIsOizrOaItuiomOmMhFxyXG4gICAgICAgIC8vIOaqouafpSBhY2NvdW50cyDpm4blkIjkuK3mmK/lkKbmnInlsI3mh4nnmoTos6zmiLboqJjpjIRcclxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IGRiLmNvbGxlY3Rpb24oJ2FjY291bnRzJyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgYWNjb3VudHMuZmluZE9uZSh7XHJcbiAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcclxuICAgICAgICAgIHByb3ZpZGVyQWNjb3VudElkOiBhY2NvdW50LnByb3ZpZGVyQWNjb3VudElkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghZXhpc3RpbmdBY2NvdW50KSB7XHJcbiAgICAgICAgICAvLyDlpoLmnpzmspLmnInmib7liLDos6zmiLboqJjpjITvvIzmiYvli5XlibXlu7rkuIDlgItcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfmnKrmib7liLDos6zmiLboqJjpjITvvIzmiYvli5XlibXlu7onKTtcclxuICAgICAgICAgIGF3YWl0IGFjY291bnRzLmluc2VydE9uZSh7XHJcbiAgICAgICAgICAgIHVzZXJJZDogcGVuZGluZ1VzZXIuX2lkLFxyXG4gICAgICAgICAgICB0eXBlOiAnb2F1dGgnLFxyXG4gICAgICAgICAgICBwcm92aWRlcjogYWNjb3VudC5wcm92aWRlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXHJcbiAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IGFjY291bnQucmVmcmVzaF90b2tlbixcclxuICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2NvdW50LmFjY2Vzc190b2tlbixcclxuICAgICAgICAgICAgZXhwaXJlc19hdDogYWNjb3VudC5leHBpcmVzX2F0LFxyXG4gICAgICAgICAgICB0b2tlbl90eXBlOiBhY2NvdW50LnRva2VuX3R5cGUsXHJcbiAgICAgICAgICAgIHNjb3BlOiBhY2NvdW50LnNjb3BlLFxyXG4gICAgICAgICAgICBpZF90b2tlbjogYWNjb3VudC5pZF90b2tlbixcclxuICAgICAgICAgICAgc2Vzc2lvbl9zdGF0ZTogYWNjb3VudC5zZXNzaW9uX3N0YXRlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn6LOs5oi26KiY6YyE5Ym15bu65a6M5oiQJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOi/lOWbniB0cnVl77yM5YWB6KixIE5leHRBdXRoIGFkYXB0ZXIg5Ym15bu66LOs5oi26KiY6YyEXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWmguaenOmDveaykuacie+8jOWJteW7uuaWsOeUqOaItu+8iOmAmeeoruaDheazgeS4jeaHieipsueZvOeUn++8jOS9huS/neeVmeS9nOeCuuW+jOWCme+8iVxyXG4gICAgICBjb25zb2xlLndhcm4oJ+acquaJvuWIsOW+hemXnOiBr+eUqOaItu+8jOWJteW7uuaWsOeUqOaIticpO1xyXG4gICAgICBjb25zdCBhdXRvVXNlcklEID0gYCR7YWNjb3VudC5wcm92aWRlcn1fJHthY2NvdW50LnByb3ZpZGVyQWNjb3VudElkfWA7XHJcbiAgICAgIGF3YWl0IHVzZXJzLmluc2VydE9uZSh7XHJcbiAgICAgICAgdXNlcklEOiBhdXRvVXNlcklELFxyXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCBwcm9maWxlPy5uYW1lIHx8IHVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0sXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXHJcbiAgICAgICAgcHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlckFjY291bnRJZCxcclxuICAgICAgICBpbWFnZTogdXNlci5pbWFnZSB8fCBwcm9maWxlPy5waWN0dXJlLFxyXG4gICAgICAgIG9hdXRoQ29tcGxldGVkOiB0cnVlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDov5Tlm54gdHJ1Ze+8jOWFgeiosSBOZXh0QXV0aCBhZGFwdGVyIOWJteW7uuizrOaItuiomOmMhFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcclxuICAgIGVycm9yOiAnL2F1dGgvZXJyb3InLFxyXG4gIH0sXHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxyXG4gICAgbWF4QWdlOiA3ICogMjQgKiA2MCAqIDYwLCAvLyA3IOWkqVxyXG4gIH0sXHJcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXHJcbn0pO1xyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiR29vZ2xlUHJvdmlkZXIiLCJHaXRIdWJQcm92aWRlciIsIkZhY2Vib29rUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiY2xpZW50UHJvbWlzZSIsIk1vbmdvREJBZGFwdGVyIiwiYmNyeXB0IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImNvbnNvbGUiLCJ3YXJuIiwiTU9OR09EQl9VUkkiLCJlcnJvciIsIk5FWFRBVVRIX1NFQ1JFVCIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImF1dGhvcml6YXRpb24iLCJwYXJhbXMiLCJwcm9tcHQiLCJhY2Nlc3NfdHlwZSIsInJlc3BvbnNlX3R5cGUiLCJHSVRIVUJfQ0xJRU5UX0lEIiwiR0lUSFVCX0NMSUVOVF9TRUNSRVQiLCJGQUNFQk9PS19DTElFTlRfSUQiLCJGQUNFQk9PS19DTElFTlRfU0VDUkVUIiwibmFtZSIsImNyZWRlbnRpYWxzIiwidXNlcklEIiwibGFiZWwiLCJ0eXBlIiwiYXV0aG9yaXplIiwiY2xpZW50IiwiZGIiLCJ1c2VycyIsImNvbGxlY3Rpb24iLCJ1c2VyIiwiZmluZE9uZSIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJlbWFpbCIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwiYWNjb3VudCIsInByb2ZpbGUiLCJwcm92aWRlciIsImRiVXNlciIsInByb3ZpZGVySWQiLCJwcm92aWRlckFjY291bnRJZCIsIm9hdXRoQ29tcGxldGVkIiwibG9nIiwic2Vzc2lvbiIsImltYWdlIiwidG9rZW5Vc2VySUQiLCJ0b2tlbkVtYWlsIiwiZmFsbGJhY2tVc2VyIiwic2lnbkluIiwicmVxIiwiZXhpc3RpbmdVc2VyIiwiYWNjb3VudHMiLCJleGlzdGluZ0FjY291bnQiLCJpbnNlcnRPbmUiLCJ1c2VySWQiLCJyZWZyZXNoX3Rva2VuIiwiYWNjZXNzX3Rva2VuIiwiZXhwaXJlc19hdCIsInRva2VuX3R5cGUiLCJzY29wZSIsImlkX3Rva2VuIiwic2Vzc2lvbl9zdGF0ZSIsImZpdmVNaW51dGVzQWdvIiwiRGF0ZSIsIm5vdyIsInBlbmRpbmdVc2VyIiwiY3JlYXRlZEF0IiwiJGd0ZSIsInNvcnQiLCJ1cGRhdGVPbmUiLCIkc2V0IiwicGljdHVyZSIsInVwZGF0ZWRBdCIsImF1dG9Vc2VySUQiLCJzcGxpdCIsInBhZ2VzIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5C%5B...nextauth%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();